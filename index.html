<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Fav Links</title>

<link rel="icon" type="image/png" href="icon.png">
<link rel="apple-touch-icon" href="icon.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="ambient"></div>
<div class="grain"></div>

<header class="header">
  <div class="header-inner">
    <div class="logo">Fav <span>Links</span></div>
<button class="hbtn" onclick="openSearchModal()" title="ุจุญุซ">
  <i class="fas fa-search"></i>
</button>
    <button class="hbtn" id="btn-swap" onclick="checkAuth(toggleSwapMode)" title="ุชุฑุชูุจ">โ</button>
    <button class="hbtn" id="btn-select" onclick="checkAuth(toggleSelectMode)" title="ุชุญุฏูุฏ">โ</button>

    <div class="dropdown">
      <button class="hbtn" onclick="handleDDToggle(event)"><i class="fas fa-ellipsis-v"></i></button>
      <div class="ddmenu" id="ddmenu">
        <div class="dditem" onclick="exportData()">
          <i class="fas fa-file-export"></i> <span>ุชุตุฏูุฑ ุงูุจูุงูุงุช</span>
        </div>
        <div class="dditem" onclick="document.getElementById('file-imp').click()">
          <i class="fas fa-file-import"></i> <span>ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</span>
          <input type="file" id="file-imp" accept=".json" style="display:none" onchange="importData(event)">
        </div>
        <div class="ddsep"></div>
        <div class="dditem" id="dd-pass" onclick="openPassModal()">
          <i class="fas fa-key"></i> <span id="dd-pass-label">ุชุนููู ูููุฉ ูุฑูุฑ</span>
        </div>
        <div class="ddsep"></div>
        <div class="dditem danger" onclick="askClearData()">
          <i class="fas fa-trash-alt"></i> <span>ุญุฐู ูู ุงูุจูุงูุงุช</span>
        </div>
      </div>
    </div>
  </div>
</header>

<main id="main-content">
  <div class="mode-banner swap-banner" id="swap-banner">
    โฆ &nbsp; ูุถุน ุงูุชุฑุชูุจ โ ุงููุฑ ุนูู ุฑุงุจุท ุฃู ูุฌููุนุฉ ุซู ุงููุฑ ุนูู ุงูููุงู ุงูุฌุฏูุฏ
  </div>
  <div class="mode-banner select-banner" id="select-banner">
    โ &nbsp; ูุถุน ุงูุชุญุฏูุฏ โ ุงููุฑ ุนูู ุงูุฑูุงุจุท ูุชุญุฏูุฏูุง
  </div>
  <div id="groups-container"></div>
</main>

<div class="fab-row" id="fab-row">
  <button class="fab fab-sec" onclick="checkAuth(openAddSection)">๏ผ ูุณู</button>
  <button class="fab fab-main" onclick="checkAuth(openAddLink)">๏ผ ุฑุงุจุท</button>
</div>

<div class="action-bar" id="action-bar">
  <span class="sel-count" id="sel-count">0 ูุญุฏุฏ</span>
  <button class="abtn" onclick="selectAll()">โ ุงููู</button>
  <div class="ab-sep"></div>
  <button class="abtn" onclick="openMoveModal()">โ ููู</button>
  <div class="ab-sep"></div>
  <button class="abtn danger" onclick="deleteSelected()">โ ุญุฐู</button>
  <div class="ab-sep"></div>
  <button class="abtn" onclick="cancelSelect()">โ ุฅูุบุงุก</button>
</div>

<div class="toast" id="toast"></div>

<div class="overlay center" id="auth-modal">
  <div class="modal auth-modal-box">
    <div class="lock-title" style="margin-bottom:20px;">ุฅุฌุฑุงุก ูุญูู</div>
    <input type="password" id="auth-input" class="lock-input" placeholder="โข โข โข โข โข โข"
           onkeydown="if(event.key==='Enter')submitAuth()">
    <button class="lock-btn" onclick="submitAuth()">ุชุฃููุฏ</button>
    <button class="cbtn cbtn-cancel" style="margin-top:10px; width:100%" onclick="cancelAuth()">ุฅูุบุงุก</button>
  </div>
</div>

<div class="overlay center" id="group-view-modal" onclick="overlayClose(event,'group-view-modal')">
  <div class="modal" style="display:flex; flex-direction:column; height:80vh; max-height:80vh; padding:24px 20px 0px;">
    <div class="modal-title" style="margin-bottom:15px; flex-shrink:0;">
      <span id="gv-title"></span>
      <button class="mclose" onclick="closeModal('group-view-modal')">โ</button>
    </div>
    <div id="gv-links" class="links-grid" style="overflow-x:hidden; overflow-y:auto; padding:5px 4px 10px; flex-grow:1; width:100%;">
      </div>
    <div style="flex-shrink:0; margin-top:10px; padding-bottom:65px;">
      <button class="cbtn cbtn-cancel" style="width:100%;" onclick="closeModal('group-view-modal')">ุฅุบูุงู</button>
    </div>
  </div>
</div>

<div class="overlay center" id="link-ctx-modal" onclick="overlayClose(event,'link-ctx-modal')">
  <div class="modal">
    <div class="modal-title">
      <span id="link-ctx-name">ุฎูุงุฑุงุช ุงูุฑุงุจุท</span>
      <button class="mclose" onclick="closeModal('link-ctx-modal')">โ</button>
    </div>
    <div class="mgroup-list">
      <div class="mgroup-item" onclick="ctxOpenLink()">
        <span class="mg-e">๐</span> ูุชุญ
      </div>
      <div class="mgroup-item" onclick="ctxCopyLink()">
        <span class="mg-e">๐</span> ูุณุฎ
      </div>
      <div class="mgroup-item" onclick="reqEditLink()">
        <span class="mg-e">โ๏ธ</span> ุชุนุฏูู
      </div>
      <div class="mgroup-item" style="color:var(--danger); border-color:rgba(248,113,113,0.15);"
           onclick="reqDeleteLink()">
        <span class="mg-e">๐</span> ุญุฐู
      </div>
    </div>
  </div>
</div>

<div class="overlay center" id="link-modal" onclick="overlayClose(event,'link-modal')">
  <div class="modal" style="display:flex; flex-direction:column; max-height:85vh; padding:24px 20px 0px;">
    <div class="modal-title" style="flex-shrink:0; margin-bottom:15px;">
      <span id="link-modal-title">โ ุฅุถุงูุฉ ุฑุงุจุท</span>
      <button class="mclose" onclick="closeModal('link-modal')">โ</button>
    </div>

    <div style="overflow-y:auto; flex-grow:1; padding:5px 4px 24px;">
      <label class="flabel">ุงูุฑุงุจุท</label>
      <input type="url" class="finput" id="inp-url" placeholder="https://example.com"
             oninput="previewURL(this.value)">

      <div class="url-preview" id="url-prev">
        <div class="uprev-icon"><img id="uprev-img" src="" alt=""></div>
        <div>
          <div class="uprev-domain" id="uprev-domain"></div>
          <div class="uprev-full" id="uprev-full"></div>
        </div>
      </div>

      <label class="flabel">ุงูุงุณู</label>
      <input type="text" class="finput" id="inp-name" placeholder="ุงุณู ุงูุฑุงุจุท...">

      <label class="flabel">ุงููุณู</label>
      <div class="group-chips" id="group-chips-list" style="max-height:none; overflow:visible;"></div>
      <button class="gchip new-chip" onclick="openAddSection(true)" style="width:100%;margin-bottom:16px;">
        ๏ผ ูุณู ุฌุฏูุฏ
      </button>

      <button class="msave" style="margin-top:10px;" onclick="saveLink()">ุญูุธ ุงูุฑุงุจุท</button>
    </div>
  </div>
</div>

<div class="overlay center" id="section-modal" onclick="overlayClose(event,'section-modal')">
  <div class="modal" style="display:flex; flex-direction:column; max-height:85vh; padding:24px 20px 0px;">
    <div class="modal-title" style="flex-shrink:0; margin-bottom:15px;">
      <span id="sec-modal-title">๐ ูุณู ุฌุฏูุฏ</span>
      <button class="mclose" onclick="closeModal('section-modal')">โ</button>
    </div>

    <div style="overflow-y:auto; flex-grow:1; padding:5px 4px 24px;">
      <label class="flabel">ุงุณู ุงููุณู</label>
      <input type="text" class="finput" id="inp-sec-name" placeholder="ูุซุงู: ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู">

      <label class="flabel">ุฃููููุฉ</label>
      <div class="emoji-row" id="emoji-picker"></div>

      <label class="flabel">ููู</label>
      <div class="color-row" id="color-picker"></div>

      <button class="msave" id="sec-save-btn" style="margin-top:10px;" onclick="saveSection()">ุฅูุดุงุก ุงููุณู</button>
    </div>
  </div>
</div>

<div class="overlay center" id="move-modal" onclick="overlayClose(event,'move-modal')">
  <div class="modal" style="display:flex; flex-direction:column; height:80vh; max-height:80vh; padding:24px 20px 0px;">
    <div class="modal-title" style="margin-bottom:15px; flex-shrink:0;">
      <span>๐ฆ ููู ุฅูู</span>
      <button class="mclose" onclick="closeModal('move-modal')">โ</button>
    </div>
    <div class="mgroup-list" id="move-list" style="overflow-y:auto; padding-right:5px; flex-grow:1; padding-bottom: 70px;"></div>
  </div>
</div>

<div class="overlay center" id="pass-modal" onclick="overlayClose(event,'pass-modal')">
  <div class="modal" style="display:flex; flex-direction:column; max-height:85vh; padding:24px 20px 0px;">
    <div class="modal-title" style="flex-shrink:0; margin-bottom:15px;">
      <span id="pass-modal-title">๐ ูููุฉ ุงููุฑูุฑ</span>
      <button class="mclose" onclick="closeModal('pass-modal')">โ</button>
    </div>
    <div id="pass-form" style="overflow-y:auto; flex-grow:1; padding:5px 4px 24px;">
      <div id="pass-old-wrap" style="display:none;">
        <label class="flabel">ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</label>
        <input type="password" class="finput" id="inp-old-pass" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ">
      </div>
      <label class="flabel">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
      <input type="password" class="finput" id="inp-new-pass" placeholder="โข โข โข โข โข โข">
      <label class="flabel">ุงูุชุฃููุฏ</label>
      <input type="password" class="finput" id="inp-conf-pass" placeholder="โข โข โข โข โข โข">
      <div id="pass-rm-wrap" style="display:none; margin-bottom:12px;">
        <button class="pass-rm" onclick="removePassword()">๐ ุฅุฒุงูุฉ ูููุฉ ุงููุฑูุฑ</button>
      </div>
      <button class="msave" style="margin-top:10px;" onclick="savePassword()">ุญูุธ</button>
    </div>
  </div>
</div>

<div class="overlay center" id="confirm-modal">
  <div class="modal">
    <div class="confirm-icon" id="conf-icon"></div>
    <div class="confirm-title" id="conf-title"></div>
    <div class="confirm-msg" id="conf-msg"></div>
    <div class="confirm-btns">
      <button class="cbtn cbtn-cancel" onclick="closeModal('confirm-modal')">ุฅูุบุงุก</button>
      <button class="cbtn" id="conf-ok" onclick="runConfirm()">ุชุฃููุฏ</button>
    </div>
  </div>
</div>

<div class="overlay center" id="sec-ctx-modal" onclick="overlayClose(event,'sec-ctx-modal')">
  <div class="modal">
    <div class="modal-title">
      <span id="sec-ctx-name">ุฎูุงุฑุงุช ุงููุณู</span>
      <button class="mclose" onclick="closeModal('sec-ctx-modal')">โ</button>
    </div>
    <div class="mgroup-list">
      <div class="mgroup-item" onclick="editSection(currentSecId)">
        <span class="mg-e">โ๏ธ</span> ุชุนุฏูู ุงููุณู
      </div>
      <div class="mgroup-item" style="color:var(--danger); border-color:rgba(248,113,113,0.15);"
           onclick="askDeleteSection(currentSecId)">
        <span class="mg-e">๐</span> ุญุฐู ุงููุณู
      </div>
    </div>
  </div>
</div>
<div class="overlay center" id="search-modal" onclick="overlayClose(event,'search-modal')">
  <div class="modal" style="display:flex; flex-direction:column; max-height:85vh; padding:24px 20px 0px;">
    <div class="modal-title" style="flex-shrink:0; margin-bottom:15px;">
      <span>๐ ุจุญุซ ุฐูู</span>
      <button class="mclose" onclick="closeModal('search-modal')">โ</button>
    </div>
    <div style="flex-shrink:0; margin-bottom:15px;">
      <input type="text" class="finput" id="inp-search" placeholder="ุงูุชุจ ุงุณู ุงูุฑุงุจุท ููุง..." oninput="performSearch(this.value)" autocomplete="off">
    </div>
    <div id="search-results" class="links-grid" style="overflow-y:auto; flex-grow:1; padding:5px 4px 24px; align-content:start;">
    </div>
  </div>
</div>
<script src="script.js"></script>
</body>
</html>